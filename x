 <nav class="filter-sidebar">
            <h3 class="filter-title">Filters</h3>
            <div class="filter-sidebar-content">
                <div class="filter-group">
                    <label for="keywords" class="filter-label">Keywords</label>
                    <input type="text" id="keywords" class="filter-input" placeholder="e.g., Engineer, Sales">
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">Experience</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <label><input type="checkbox" name="experience" value="0"> Fresher (0 Years)</label>
                        <label><input type="checkbox" name="experience" value="1-3"> 1-3 Years</label>
                        <label><input type="checkbox" name="experience" value="3-5"> 3-5 Years</label>
                        <label><input type="checkbox" name="experience" value="5+"> 5+ Years</label>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">Location</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <label><input type="checkbox" name="location" value="Mumbai"> Mumbai</label>
                        <label><input type="checkbox" name="location" value="Bangalore"> Bangalore</label>
                        <label><input type="checkbox" name="location" value="Delhi"> Delhi</label>
                        <label><input type="checkbox" name="location" value="Pune"> Pune</label>
                        <label><input type="checkbox" name="location" value="Hyderabad"> Hyderabad</label>
                        <label><input type="checkbox" name="location" value="Chennai"> Chennai</label>
                        <label><input type="checkbox" name="location" value="Kolkata"> Kolkata</label>
                        <label><input type="checkbox" name="location" value="Gurgaon"> Gurgaon</label>
                        <label><input type="checkbox" name="location" value="Ahmedabad"> Ahmedabad</label>
                        <label><input type="checkbox" name="location" value="Lucknow"> Lucknow</label>
                        <label><input type="checkbox" name="location" value="Gwalior"> Gwalior</label>
                        <label><input type="checkbox" name="location" value="Salem"> Salem</label>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">Notice Period</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <label><input type="checkbox" name="noticePeriod" value="Immediate"> Immediate</label>
                        <label><input type="checkbox" name="noticePeriod" value="15 Days"> 15 Days</label>
                        <label><input type="checkbox" name="noticePeriod" value="30 Days"> 30 Days</label>
                        <label><input type="checkbox" name="noticePeriod" value="60 Days"> 60 Days</label>
                        <label><input type="checkbox" name="noticePeriod" value="90 Days"> 90 Days</label>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">Functional Area</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <label><input type="checkbox" name="functionalArea" value="Legal"> Legal</label>
                        <label><input type="checkbox" name="functionalArea" value="Software Development"> Software Development</label>
                        <label><input type="checkbox" name="functionalArea" value="Human Resources"> Human Resources</label>
                        <label><input type="checkbox" name="functionalArea" value="Corporate Planning / Consulting / Strategy / PMO"> Corporate Planning</label>
                        <label><input type="checkbox" name="functionalArea" value="Marketing"> Marketing</label>
                        <label><input type="checkbox" name="functionalArea" value="Data Analytics"> Data Analytics</label>
                        <label><input type="checkbox" name="functionalArea" value="Product Management"> Product Management</label>
                        <label><input type="checkbox" name="functionalArea" value="Content Writing"> Content Writing</label>
                        <label><input type="checkbox" name="functionalArea" value="Project Management"> Project Management</label>
                        <label><input type="checkbox" name="functionalArea" value="Design"> Design</label>
                        <label><input type="checkbox" name="functionalArea" value="Finance"> Finance</label>
                        <label><input type="checkbox" name="functionalArea" value="Operations"> Operations</label>
                        <label><input type="checkbox" name="functionalArea" value="Customer Service"> Customer Service</label>
                        <label><input type="checkbox" name="functionalArea" value="Data Science"> Data Science</label>
                        <label><input type="checkbox" name="functionalArea" value="IT"> IT</label>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">Industry</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <label><input type="checkbox" name="industry" value="Legal Services"> Legal Services</label>
                        <label><input type="checkbox" name="industry" value="IT Services"> IT Services</label>
                        <label><input type="checkbox" name="industry" value="Recruitment"> Recruitment</label>
                        <label><input type="checkbox" name="industry" value="CWA - CMA, Cost & Management Accountant Firm"> Accounting Firm</label>
                        <label><input type="checkbox" name="industry" value="Technology"> Technology</label>
                        <label><input type="checkbox" name="industry" value="Advertising"> Advertising</label>
                        <label><input type="checkbox" name="industry" value="Financial Services"> Financial Services</label>
                        <label><input type="checkbox" name="industry" value="E-commerce"> E-commerce</label>
                        <label><input type="checkbox" name="industry" value="Media & Entertainment"> Media & Entertainment</label>
                        <label><input type="checkbox" name="industry" value="Banking"> Banking</label>
                        <label><input type="checkbox" name="industry" value="Logistics"> Logistics</label>
                        <label><input type="checkbox" name="industry" value="BPO"> BPO</label>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">Education</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <label><input type="checkbox" name="education" value="LLB"> LLB</label>
                        <label><input type="checkbox" name="education" value="B.Tech"> B.Tech</label>
                        <label><input type="checkbox" name="education" value="MBA/PGDM"> MBA/PGDM</label>
                        <label><input type="checkbox" name="education" value="B.Sc."> B.Sc.</label>
                        <label><input type="checkbox" name="education" value="B.A."> B.A.</label>
                        <label><input type="checkbox" name="education" value="M.Tech"> M.Tech</label>
                        <label><input type="checkbox" name="education" value="B.Des"> B.Des</label>
                        <label><input type="checkbox" name="education" value="MBA Finance"> MBA Finance</label>
                        <label><input type="checkbox" name="education" value="BBA"> BBA</label>
                        <label><input type="checkbox" name="education" value="B.Com"> B.Com</label>
                        <label><input type="checkbox" name="education" value="M.Sc. Data Science"> M.Sc. Data Science</label>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">Profile Type</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <label><input type="checkbox" name="profile" value="Working Professional"> Working Professional</label>
                        <label><input type="checkbox" name="profile" value="Fresher"> Fresher</label>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-header">
                        <h4 class="filter-header-title">CTC (PA)</h4>
                        <i class="fas fa-chevron-down filter-expand-icon"></i>
                    </div>
                    <div class="filter-content expanded">
                        <div class="range-filter">
                            <input type="range" id="ctc-min" min="0" max="2000000" step="50000" value="0">
                            <input type="range" id="ctc-max" min="0" max="2000000" step="50000" value="2000000">
                            <div class="range-values">
                                <span id="ctc-min-value">0</span> - <span id="ctc-max-value">2,000,000</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <div class="content-body">
            <header class="content-header">
                <div class="flex items-center justify-between w-full">
                    <h1 class="page-title">Manage Candidates</h1>
                    <button class="sidebar-toggle md:hidden">
                        <i class="fas fa-filter"></i>
                    </button>
                </div>
                <div class="flex flex-col md:flex-row md:items-center justify-between w-full mt-4">
                    <div class="tab-bar card">
                        <button class="tab-btn active" data-status="all">All Responses</button>
                        <button class="tab-btn" data-status="suitable">Shortlisted</button>
                        <button class="tab-btn" data-status="on-hold">On Hold</button>
                        <button class="tab-btn" data-status="not-suitable">Rejected</button>
                    </div>
                    <div class="flex items-center gap-2 mt-4 md:mt-0">
                        <div class="view-options">
                            <label for="show-per-page">Show:</label>
                            <select id="show-per-page" class="filter-select">
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20" selected>20</option>
                                <option value="40">40</option>
                            </select>
                            <span>per page</span>
                        </div>
                        <div class="view-options">
                            <label for="sort-by-filter">Sort By:</label>
                            <select id="sort-by-filter" class="filter-select">
                                <option value="relevance">Relevance</option>
                                <option value="notice-period">Notice Period</option>
                                <option value="last-active">Last Active</option>
                            </select>
                        </div>
                    </div>
                </div>
            </header>



            .filter-sidebar {
    width: 280px;
    flex-shrink: 0;
    padding: 1.5rem;
    background: var(--card_bg_light);
    border-radius: 0.5rem;
    box-shadow: 0 2px 10px var(--light_shadow);
    height: fit-content;
}

html.dark .filter-sidebar {
    background: var(--dark_background_secondary);
    box-shadow: 0 2px 10px var(--dark_shadow);
}

.filter-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text_color_light);
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--border_light);
    padding-bottom: 1rem;
}

html.dark .filter-title {
    color: var(--text_color_dark);
    border-bottom: 1px solid var(--dark_border);
}

.filter-sidebar-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.filter-group {
    border-bottom: 1px solid var(--border_light);
    padding-bottom: 1rem;
}

.filter-group:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
}

.filter-header-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text_color_light);
}

html.dark .filter-header-title {
    color: var(--text_color_dark);
}

.filter-expand-icon {
    font-size: 0.75rem;
    color: var(--gray_text_light);
    transition: transform 0.2s ease;
}

.filter-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    overflow: hidden;
    max-height: 0;
    transition: max-height 0.3s ease-out, padding 0.3s ease-out;
}

.filter-content.expanded {
    max-height: 500px; /* A value large enough to show all content */
    padding-top: 0.75rem;
}

.filter-content label {
    font-size: 0.8rem;
    color: var(--gray_text_light);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

html.dark .filter-content label {
    color: var(--dark_gray_text);
}

.filter-input {
    width: 100%;
    padding: 0.4rem;
    border: 1px solid var(--border_light);
    border-radius: 0.25rem;
    font-size: 0.8rem;
    background: var(--card_bg_light);
    color: var(--text_color_light);
}

html.dark .filter-input {
    background: var(--dark_input_bg);
    border-color: var(--dark_border);
    color: var(--text_color_dark);
}

/* --- Main Content Area --- */
.content-body {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.content-header {
    background: var(--card_bg_light);
    border-radius: 0.5rem;
    box-shadow: 0 2px 10px var(--light_shadow);
    padding: 1.5rem;
    margin-bottom: 1rem;
}

html.dark .content-header {
    background: var(--dark_background_secondary);
    box-shadow: 0 2px 10px var(--dark_shadow);
}

/* --- Stats and View Options --- */
.stats-bar {
    background: var(--card_bg_light);
    border-radius: 0.5rem;
    box-shadow: 0 2px 10px var(--light_shadow);
    padding: 1rem 1.5rem;
    margin-bottom: 1.5rem;
    font-size: 0.875rem;
    color: var(--gray_medium_light);
}

html.dark .stats-bar {
    background: var(--dark_background_secondary);
    box-shadow: 0 2px 10px var(--dark_shadow);
    color: var(--dark_gray_text);
}

/* Rest of the existing CSS for cards, buttons, etc. goes here */
/* (omitted for brevity) */

/* --- Responsive Design --- */
@media (max-width: 1024px) {
    .main-layout {
        flex-direction: column;
        padding: 1rem;
    }
    .filter-sidebar {
        width: 100%;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 100;
        height: 100vh;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        padding-top: 5rem; /* Space for the header */
    }
    .filter-sidebar.active {
        transform: translateX(0);
    }
    .sidebar-toggle {
        display: block;
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 101;
        background: var(--primary_blue);
        color: white;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
    }
}

let filters = {
        keywords: '',
        experience: [],
        location: [],
        noticePeriod: [],
        functionalArea: [],
        industry: [],
        education: [],
        profile: [],
        ctcMin: 0,
        ctcMax: 2000000,
        job: 'all',
        status: 'all',
        activeIn: 'all',
        sortBy: 'relevance'
    };

    // Toggle sidebar on mobile
    sidebarToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        filterSidebar.classList.toggle('active');
    });

    // Close filters when clicking outside on mobile
    document.body.addEventListener('click', (e) => {
        if (!e.target.closest('.filter-sidebar') && filterSidebar.classList.contains('active')) {
            filterSidebar.classList.remove('active');
        }
    });

    // Toggle filter sections (e.g., Experience, Location)
    filterHeaders.forEach(header => {
        header.addEventListener('click', () => {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.filter-expand-icon');
            content.classList.toggle('expanded');
            icon.classList.toggle('fa-chevron-down');
            icon.classList.toggle('fa-chevron-up');
        });
    });

    // Handle checkbox filters
    const checkboxGroups = ['experience', 'location', 'noticePeriod', 'functionalArea', 'industry', 'education', 'profile'];
    checkboxGroups.forEach(group => {
        document.querySelectorAll(`input[name="${group}"]`).forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                filters[group] = Array.from(document.querySelectorAll(`input[name="${group}"]:checked`)).map(cb => cb.value);
                currentPage = 1;
                updateCandidateList();
            });
        });
    });

    // Handle CTC range slider
    ctcMinInput.addEventListener('input', () => {
        let minVal = parseInt(ctcMinInput.value);
        let maxVal = parseInt(ctcMaxInput.value);
        if (minVal > maxVal) {
            minVal = maxVal;
            ctcMinInput.value = minVal;
        }
        filters.ctcMin = minVal;
        ctcMinValue.textContent = minVal.toLocaleString();
        currentPage = 1;
        updateCandidateList();
    });

    ctcMaxInput.addEventListener('input', () => {
        let minVal = parseInt(ctcMinInput.value);
        let maxVal = parseInt(ctcMaxInput.value);
        if (maxVal < minVal) {
            maxVal = minVal;
            ctcMaxInput.value = maxVal;
        }
        filters.ctcMax = maxVal;
        ctcMaxValue.textContent = maxVal.toLocaleString();
        currentPage = 1;
        updateCandidateList();
    });

    // Handle input and select filters
    keywordsInput.addEventListener('input', () => {
        filters.keywords = keywordsInput.value.toLowerCase();
        currentPage = 1;
        updateCandidateList();
    });

    jobsFilter.addEventListener('change', () => {
        filters.job = jobsFilter.value;
        currentPage = 1;
        updateCandidateList();
    });

    statusFilter.addEventListener('change', () => {
        filters.status = statusFilter.value;
        currentPage = 1;
        updateCandidateList();
    });

    activeInFilter.addEventListener('change', () => {
        filters.activeIn = activeInFilter.value;
        currentPage = 1;
        updateCandidateList();
    });

    sortByFilter.addEventListener('change', () => {
        filters.sortBy = sortByFilter.value;
        currentPage = 1;
        updateCandidateList();
    });

    showPerPageSelect.addEventListener('change', () => {
        itemsPerPage = parseInt(showPerPageSelect.value);
        currentPage = 1;
        updateCandidateList();
    });

    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            updateCandidateList();
        }
    });

    nextPageBtn.addEventListener('click', () => {
        const totalPages = Math.ceil(getFilteredApplications().length / itemsPerPage);
        if (currentPage < totalPages) {
            currentPage++;
            updateCandidateList();
        }
    });

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            tabButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            currentStatus = button.dataset.status;
            currentPage = 1;
            updateCandidateList();
        });
    });

    function getFilteredApplications() {
        return applicationsData
            .filter(app => {
                if (currentStatus !== 'all' && app.status !== currentStatus) return false;
                if (filters.keywords && !(app.name && app.name.toLowerCase().includes(filters.keywords)) && !(app.job && app.job.toLowerCase().includes(filters.keywords))) return false;
                if (filters.experience.length && !filters.experience.some(exp => {
                    const expYears = parseFloat(app.experience) || 0;
                    if (exp === '0') return expYears === 0;
                    if (exp === '1-3') return expYears >= 1 && expYears <= 3;
                    if (exp === '3-5') return expYears > 3 && expYears <= 5;
                    if (exp === '5+') return expYears > 5;
                    return false;
                })) return false;
                if (filters.location.length && !(app.location && filters.location.includes(app.location))) return false;
                if (filters.noticePeriod.length && !(app.noticePeriod && filters.noticePeriod.includes(app.noticePeriod))) return false;
                if (filters.functionalArea.length && !(app.functionalArea && filters.functionalArea.includes(app.functionalArea))) return false;
                if (filters.industry.length && !(app.industry && filters.industry.includes(app.industry))) return false;
                if (filters.education.length && !(app.education && filters.education.includes(app.education))) return false;
                if (filters.profile.length && !(app.profile && filters.profile.includes(app.profile))) return false;
                const ctc = parseInt(app.ctc) || 0;
                if (ctc < filters.ctcMin || ctc > filters.ctcMax) return false;
                if (filters.job !== 'all' && !(app.job && app.job === filters.job)) return false;
                if (filters.status !== 'all' && !(app.status && app.status === filters.status)) return false;
                if (filters.activeIn !== 'all') {
                    const lastActiveDate = new Date(app.lastActive);
                    const now = new Date();
                    const daysDiff = Math.floor((now - lastActiveDate) / (1000 * 60 * 60 * 24));
                    if (daysDiff > parseInt(filters.activeIn)) return false;
                }
                return true;
            })
            .sort((a, b) => {
                if (filters.sortBy === 'relevance') {
                    const aRelevance = Object.values(a.relevance).filter(v => v).length;
                    const bRelevance = Object.values(b.relevance).filter(v => v).length;
                    return bRelevance - aRelevance;
                } else if (filters.sortBy === 'notice-period') {
                    const aDays = a.noticePeriod === 'Immediate' ? 0 : parseInt(a.noticePeriod) || Infinity;
                    const bDays = b.noticePeriod === 'Immediate' ? 0 : parseInt(b.noticePeriod) || Infinity;
                    return aDays - bDays;
                } else if (filters.sortBy === 'last-active') {
                    return new Date(b.lastActive) - new Date(a.lastActive);
                }
                return 0;
            });
    }

    function renderRelevanceBadge(label, isMatch) {
        const className = isMatch ? 'match' : 'no-match';
        return `
            <span class="relevance-badge ${className}">
                <i class="fas fa-${isMatch ? 'check' : 'times'}-circle"></i> ${label}
            </span>
        `;
    }

    function updateCandidateList() {
        const filteredApplications = getFilteredApplications();
        const totalApplications = filteredApplications.length;
        const start = (currentPage - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const paginatedApplications = filteredApplications.slice(start, end);

        candidateListContainer.innerHTML = '';
        if (paginatedApplications.length === 0) {
            candidateListContainer.innerHTML = `<div class="text-center py-8 text-gray-500">No candidates found matching the selected filters.</div>`;
        } else {
            paginatedApplications.forEach(app => {
                const card = document.createElement('div');
                card.className = 'candidate-card';
                card.innerHTML = `
                    <div class="candidate-card-layout" data-candidate-id="${app.id}">
                        <div class="candidate-info">
                            <div class="card-header">
                                <div class="candidate-summary">
                                    <div class="candidate-avatar-frame">${app.initials}</div>
                                    <div class="candidate-name">
                                        <h2>${app.name}</h2>
                                        <p>${app.profile}</p>
                                    </div>
                                </div>
                                <div class="job-info">
                                    <p>Applied for: ${app.job}</p>
                                    <p>Modified: ${app.modifiedDate}</p>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="candidate-details">
                                    <div class="details-item"><i class="fas fa-briefcase"></i> ${app.experience}</div>
                                    <div class="details-item"><i class="fas fa-rupee-sign"></i> ${app.ctc}</div>
                                    <div class="details-item"><i class="fas fa-map-marker-alt"></i> ${app.location}</div>
                                    <div class="details-item"><i class="fas fa-clock"></i> ${app.noticePeriod}</div>
                                </div>
                                <div class="additional-details">
                                    ${app.previousWork ? `<span>Previous Work: ${app.previousWork}</span>` : ''}
                                    ${app.education ? `<span>Education: ${app.education}</span>` : ''}
                                    ${app.functionalArea ? `<span>Functional Area: ${app.functionalArea}</span>` : ''}
                                    ${app.industry ? `<span>Industry: ${app.industry}</span>` : ''}
                                </div>
                                <div class="relevance-matrix">
                                    <h3 class="relevance-header">Relevance Matrix</h3>
                                    <div class="relevance-badges">
                                        ${renderRelevanceBadge('Functional Area', app.relevance.functionalArea)}
                                        ${renderRelevanceBadge('Job Role', app.relevance.jobRole)}
                                        ${renderRelevanceBadge('Industry', app.relevance.industry)}
                                        ${renderRelevanceBadge('Experience', app.relevance.experience)}
                                        ${renderRelevanceBadge('CTC', app.relevance.ctc)}
                                        ${renderRelevanceBadge('Location', app.relevance.location)}
                                    </div>
                                </div>
                            </div>
                            <div class="card-bottom-actions">
                                <div class="left-action-buttons">
                                    <button class="status-btn shortlist" data-id="${app.id}" data-status="suitable">Shortlist</button>
                                    <button class="status-btn on-hold" data-id="${app.id}" data-status="on-hold">On Hold</button>
                                    <button class="status-btn not-suitable" data-id="${app.id}" data-status="not-suitable">Not Suitable</button>
                                </div>
                                <div class="recruiter-actions">
                                    <button class="recruiter-action-btn">Actions <i class="fas fa-chevron-up"></i></button>
                                    <div class="recruiter-dropdown">
                                        <a href="#" class="recruiter-dropdown-link" data-action="view-resume">View Resume</a>
                                        <a href="#" class="recruiter-dropdown-link" data-action="schedule-interview">Schedule Interview</a>
                                        <a href="#" class="recruiter-dropdown-link" data-action="add-note">Add Note</a>
                                        <a href="#" class="recruiter-dropdown-link" data-action="download-resume">Download Resume</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="contact-vertical-bar">
                            <a href="mailto:${app.email}"><i class="fas fa-envelope"></i> Email</a>
                            <a href="tel:${app.phone}"><i class="fas fa-phone"></i> Call</a>
                            <a href="https://wa.me/${app.phone}" target="_blank"><i class="fab fa-whatsapp"></i> Chat</a>
                        </div>
                    </div>
                `;
                candidateListContainer.appendChild(card);
            });
        }

        const totalPages = Math.ceil(totalApplications / itemsPerPage);
        prevPageBtn.classList.toggle('disabled', currentPage === 1);
        nextPageBtn.classList.toggle('disabled', currentPage === totalPages || totalPages === 0);
        pageNumbersContainer.innerHTML = '';
        const maxPagesToShow = 5;
        let startPage = Math.max(1, currentPage - Math.floor(maxPagesToShow / 2));
        let endPage = Math.min(totalPages, startPage + maxPagesToShow - 1);
        if (endPage - startPage + 1 < maxPagesToShow) {
            startPage = Math.max(1, endPage - maxPagesToShow + 1);
        }
        for (let i = startPage; i <= endPage; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.className = `page-btn-sm ${i === currentPage ? 'active' : ''}`;
            pageBtn.textContent = i;
            pageBtn.addEventListener('click', () => {
                currentPage = i;
                updateCandidateList();
            });
            pageNumbersContainer.appendChild(pageBtn);
        }
        totalCountText.textContent = `Showing ${start + 1} to ${Math.min(end, totalApplications)} of ${totalApplications} applications`;

        // Add event listeners for action buttons
        document.querySelectorAll('.status-btn').forEach(button => {
            button.addEventListener('click', () => {
                const id = parseInt(button.dataset.id);
                const status = button.dataset.status;
                const app = applicationsData.find(a => a.id === id);
                if (app) {
                    app.status = status;
                    updateCandidateList();
                }
            });
        });

        document.querySelectorAll('.recruiter-action-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.stopPropagation();
                const dropdown = button.nextElementSibling;
                const isVisible = dropdown.style.display === 'flex';
                document.querySelectorAll('.recruiter-dropdown').forEach(d => {
                    if (d !== dropdown) {
                        d.style.display = 'none';
                    }
                });
                dropdown.style.display = isVisible ? 'none' : 'flex';
            });
        });

        document.querySelectorAll('.recruiter-dropdown-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const action = e.target.textContent;
                const card = e.target.closest('.candidate-card');
                const candidateId = card.dataset.id;
                alert(`Recruiter action '${action}' triggered for candidate ${candidateId}.`);
                e.target.closest('.recruiter-dropdown').style.display = 'none';
            });
        });
    }

    const uniqueJobs = [...new Set(applicationsData.map(app => app.job))].sort();
    uniqueJobs.forEach(job => {
        const option = document.createElement('option');
        option.value = job;
        option.textContent = job;
        jobsFilter.appendChild(option);
    });

    updateCandidateList();
});