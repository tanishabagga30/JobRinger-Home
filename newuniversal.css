/* --- Universal CSS with Responsive Navigation (REVISED - CLICK TO TOGGLE) --- */

/* --- ROOT VARIABLES & BASE STYLES --- */
:root {
    /* Color Palette */
    --primary: #1eacc6;
    --secondary: #1eacc6;
    --primary_blue: #1eacc6;
    --secondary_blue: #1eacc6;
    --pop_yellow: #C2D9FF;
    --light_yellow_bg: #C2D9FF;
    
    /* Light Mode */
    --body_color_light: #F2F7FF;
    --text_color_light: #000000;
    --card_bg_light: #FFFFFF;
    --border_light: #D1D5DB;
    --gray_text_light: #4B5563;
    --gray_medium_light: #6B7280;
    --light_shadow: rgba(0, 0, 0, 0.07);
    
    /* Dark Mode */
    --body_color_dark: #1A202C;
    --text_color_dark: #F7FAFC;
    --dark_background_secondary: #2D3748;
    --dark_border: #4A5568;
    --dark_shadow: rgba(0, 0, 0, 0.3);
    --dark_gray_text: #CBD5E0;
    --dark_input_bg: #2D3748;

    /* Desktop Sidebar Variables (Integrated with site theme) */
    --bg--primary: var(--card_bg_light);
    --bg--active: rgba(30, 172, 198, 0.1);
    --bg--hover: rgba(30, 172, 198, 0.05);
    --bg--focus: rgba(30, 172, 198, 0.1);
    --gray--primary: var(--gray_medium_light);
    --gray--secondary: var(--gray_text_light);
    --dark--primary: var(--primary_blue);
    --dark--secondary: var(--border_light);
    --accent--primary: var(--primary_blue);
    --accent--secondary: var(--secondary_blue);
    --expanded: 16.875rem;
    --collapsed: 3.25rem;
    --svg: 1.125rem;
    --item: 2.25rem;
    --brad-outer: 0.75rem;
    --frame-space: 0.5rem;
    --brad-inner: calc(var(--brad-outer) - var(--frame-space));
}

html.dark {
    /* Existing dark mode overrides */
    --body_color_dark: #1A202C;
    --text_color_dark: #F7FAFC;
    --dark_background_secondary: #2D3748;
    --dark_border: #4A5568;
    --dark_shadow: rgba(0, 0, 0, 0.3);
    --dark_gray_text: #CBD5E0;
    --dark_input_bg: #2D3748;

    /* Dark mode for sidebar (integrated) */
    --bg--primary: var(--dark_background_secondary);
    --bg--active: rgba(30, 172, 198, 0.2);
    --bg--hover: rgba(30, 172, 198, 0.1);
    --bg--focus: rgba(30, 172, 198, 0.2);
    --gray--primary: var(--dark_gray_text);
    --gray--secondary: var(--text_color_dark);
    --dark--primary: var(--pop_yellow);
    --dark--secondary: var(--dark_border);
    --accent--primary: var(--pop_yellow);
    --accent--secondary: var(--primary_blue);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Inter', sans-serif;
    background: var(--body_color_light);
    margin: 0;
    padding-bottom: 75px; 
    overflow-x: hidden;
    line-height: 1.5;
    transition: background-color 0.3s, color 0.3s, padding-left 300ms ease-out; /* Added padding transition */
}

a {
    text-decoration: none;
    color: inherit;
}

/* --- DARK MODE BASE STYLES --- */
html.dark body { background: var(--body_color_dark); color: var(--text_color_dark); }
html.dark .bg-white { background-color: var(--dark_background_secondary); color: var(--text_color_dark); }
html.dark .text-gray-900, html.dark .text-gray-800, html.dark .text-gray-200 { color: var(--text_color_dark); }
html.dark .text-gray-600, html.dark .text-gray-700 { color: var(--dark_gray_text); }
html.dark .border-gray-300 { border-color: var(--dark_border); }
html.dark input { background-color: var(--dark_input_bg); color: var(--text_color_dark); }

/* --- HEADER (MODIFIED FOR DESKTOP ALIGNMENT) --- */
header {
    background: var(--card_bg_light);
    border-bottom: 1px solid var(--border_light);
    position: sticky; /* Stick the header to the top of the content area */
    top: 0; /* Keep it fixed when scrolling main content */
    z-index: 100;
}
html.dark header { background: var(--dark_background_secondary); border-bottom-color: var(--dark_border); }

/* Message Slider Styles */
.message-slider { position: relative; overflow: hidden; height: 30px; background: var(--card_bg_light); border-bottom: 1px solid var(--border_light); display: flex; align-items: center; justify-content: center; text-align: center; }
html.dark .message-slider { background: var(--dark_background_secondary); border-bottom: 1px solid var(--dark_border); }
.message-slide { position: absolute; width: 100%; height: 100%; display: none; font-size: 0.8rem; color: var(--secondary_blue); font-weight: 500; line-height: 30px; }
html.dark .message-slide { color: var(--pop_yellow); }
.message-slide.active { display: block; }

/* --- UNIVERSAL NAVIGATION STYLES (Mobile Bottom Nav - UNCHANGED) --- */
#nav-placeholder {
    padding: 10px 0;
    border-top-left-radius: 1rem;
    border-top-right-radius: 1rem;
    background: var(--card_bg_light);
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    box-shadow: 0 -2px 10px var(--light_shadow);
    top: auto;
    width: 100%;
    height: auto;
    display: block;
}
#nav-placeholder #mobile-nav {
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    gap: 16px;
    padding: 0 10px;
}
/* ... (Rest of Mobile Nav Styles) ... */
#nav-placeholder #mobile-nav .flex {
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    gap: 16px;
    width: 100%;
}
#nav-placeholder #mobile-nav a {
    padding: 12px 10px !important;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: var(--gray_text_light);
    text-decoration: none;
    font-size: 0.7rem;
    gap: 6px;
    flex: 1;
    text-align: center;
    transition: color 0.2s ease;
}
#nav-placeholder #mobile-nav i { 
    font-size: 1.25rem;
    color: var(--gray_medium_light); 
    transition: color 0.2s ease;
}
#nav-placeholder #mobile-nav a:hover, #nav-placeholder #mobile-nav a.active { 
    color: var(--primary_blue); 
}
#nav-placeholder #mobile-nav a:hover i, #nav-placeholder #mobile-nav a.active i { 
    color: var(--primary_blue); 
}

/* Mobile-specific adjustments for smaller screens */
@media (max-width: 640px) {
    #nav-placeholder #mobile-nav .flex {
        gap: 12px;
    }
    #nav-placeholder #mobile-nav a {
        padding: 10px 8px !important;
        font-size: 0.65rem;
    }
    #nav-placeholder #mobile-nav i {
        font-size: 1.2rem;
    }
}

/* Dark Mode Mobile Nav */
html.dark #nav-placeholder { 
    background: var(--dark_background_secondary); 
    box-shadow: 0 -2px 10px var(--dark_shadow); 
}
html.dark #nav-placeholder #mobile-nav a { 
    color: var(--dark_gray_text); 
}
html.dark #nav-placeholder #mobile-nav i { 
    color: var(--text_color_dark); 
}
html.dark #nav-placeholder #mobile-nav a:hover, html.dark #nav-placeholder #mobile-nav a.active { 
    color: var(--pop_yellow); 
}
html.dark #nav-placeholder #mobile-nav a:hover i, html.dark #nav-placeholder #mobile-nav a.active i { 
    color: var(--pop_yellow); 
}

/* Hide mobile nav in desktop */
@media (min-width: 1024px) {
    #nav-placeholder #mobile-nav {
        display: none !important;
    }
    body {
        padding-bottom: 0 !important;
    }
}

/* Hide desktop nav in mobile */
@media (max-width: 1023px) {
    #nav-placeholder #desktop-nav {
        display: none !important;
    }
}

/* --- DESKTOP LAYOUT & LEFT NAVIGATION (min-width: 1024px) --- */
@media (min-width: 1024px) {
    /* CRITICAL FIX: Add padding to the body for content offset */
    body {
        padding-left: var(--collapsed); 
        transition: padding-left 300ms ease-out; /* Ensure smooth content shift */
    }
    
    /* REVERTED: Adjust content padding when the sidebar is CHECKED */
    /* REMOVED: This is now handled by JS using body:has(input:checked) which is unreliable */
    
    /* MODIFY: Position and size the sidebar correctly */
    #nav-placeholder {
        position: fixed !important;
        top: 0 !important; /* Start from the top edge */
        left: 0 !important;
        bottom: 0 !important;
        right: auto; 
        width: var(--collapsed) !important;
        height: 100vh !important; /* Full height */
        background: var(--bg--primary); /* Use the sidebar background color */
        border-right: 1px solid var(--border_light);
        padding: 0 !important;
        border-radius: 0;
        box-shadow: none; /* Removed shadow for integrated look */
        z-index: 1999 !important;
        transition: width 300ms ease-out !important;
        will-change: width;
    }
    
    /* REVERTED: Expand the container when checkbox is CHECKED */
    #nav-placeholder:has(input:checked) {
        width: var(--expanded) !important;
    }
    
    #nav-placeholder #desktop-nav {
        display: flex !important;
        width: 100%;
        height: 100%;
    }
    
    /* Full height adjustments for sidebar */
    .vertical-sidebar {
        margin: 0;
        height: 100%;
        width: 100%;
    }
    
    /* MODIFIED: Remove border-radius and shadow from inner nav */
    nav {
        border-radius: 0;
        box-shadow: none;
        height: 100%;
        width: 100%;
        background: transparent; /* Let #nav-placeholder define the background */
    }
    
    html.dark #nav-placeholder {
        border-right-color: var(--dark_border);
    }
    
    /* Adjust menu popup for desktop (though not used) */
    .menu-popup {
        left: var(--collapsed) !important;
        width: calc(75% - var(--collapsed)); 
        max-width: calc(300px - var(--collapsed));
    }
    .menu-popup.active {
        left: var(--collapsed) !important;
    }
}

/* --- DESKTOP SIDEBAR STYLES (REFINED FOR CLICK TOGGLE) --- */
.vertical-sidebar {
    display: flex;
    inline-size: var(--collapsed);
    transition: inline-size 300ms ease-out !important;
    will-change: inline-size;
    font-family: inherit;
}

/* REVERTED: Expand the inner sidebar wrapper when CHECKED */
.vertical-sidebar:has(input:checked) {
    inline-size: var(--expanded);
}

.vertical-sidebar input[type="checkbox"] {
    display: none;
}

/* MODIFIED: Inner NAV styling for a cleaner look */
nav {
    background: var(--bg--primary); /* Keep background here for non-media query use */
    display: flex;
    flex-flow: column;
    flex: 1;
    border-radius: 0; 
    transition: none;
    padding: var(--frame-space);
    box-shadow: none; 
}

/* REVERTED: Restore header and toggle button CSS */
header {
    display: flex;
    flex-flow: column;
    justify-content: flex-start;
    gap: 0.5rem;
    padding-top: 0.5rem; /* Reduced padding for a tighter fit */
}

.sidebar__toggle-container {
    block-size: var(--item);
    display: flex;
    justify-content: end;
}

.nav__toggle {
    block-size: 100%;
    background: none;
    transition: all 233ms ease-in;
    border-radius: var(--brad-inner);
    outline: 2px solid transparent;
    outline-offset: -2px;
    overflow: hidden;
    cursor: pointer;
}

.toggle--icons {
    block-size: inherit;
    aspect-ratio: 1;
    display: inline-grid;
    place-content: center;
    grid-template-areas: "icon";
    z-index: 10;
}

.toggle-icon {
    grid-area: icon;
    color: var(--gray--primary);
    transition: color 233ms ease-in, opacity 233ms ease-in;
}

.nav__toggle:hover {
    outline: 2px solid var(--accent--primary);
}

.toggle--icons:hover .toggle-icon {
    color: var(--dark--primary);
}

.sidebar__wrapper {
    --list-gap: 0.5rem;
    display: flex;
    flex-flow: column;
    gap: var(--list-gap);
    flex: 1;
    overflow: hidden;
    padding-top: 1rem;
}
.login-btn {
    background: #fff;
    border-radius: 6px;
    border: 1px solid #ccc;
    margin-right: 0px;
    margin-left: 10px;
    padding:5px 10px;
    font-size:12px;
}
/* --- Add these new styles for the collapsed desktop sidebar --- */
@media (min-width: 1024px) {
    /* When the sidebar is collapsed, hide the 'More' list and all text headings */
    .vertical-sidebar:not(:has(#sidebar-toggle:checked)) .list--secondary,
    .vertical-sidebar:not(:has(#sidebar-toggle:checked)) .item--heading {
        display: none;
    }

    /* Adjust the primary icon list for better spacing in the collapsed state */
    .vertical-sidebar:not(:has(#sidebar-toggle:checked)) .list--primary {
        display: flex;
        flex-direction: column;
        justify-content: flex-start; /* Vertically center the group of icons */
        flex-grow: 1;           /* Allow the list to fill the available vertical space */
        gap: 1.5rem;            /* Increase the space between icons */
    }

    /* Make the icons larger in the collapsed state */
    .vertical-sidebar:not(:has(#sidebar-toggle:checked)) .sidebaritem .icon i {
        font-size: 1.6rem; /* Increase icon size for better visibility */
        line-height: 1;
    }

    /* Center the larger icons perfectly within their containers */
    .vertical-sidebar:not(:has(#sidebar-toggle:checked)) .sidebarlink {
        justify-content: center;
        padding-inline: 0;
    }
}

.sidebar__list {
    margin: 0;
    padding: 0;
    list-style: none;
    display: flex;
    flex-flow: column;
    gap: 0.125rem;
    overflow: hidden;
    flex: 1;
}

.sidebar__item {
    block-size: var(--item);
    border-radius: var(--brad-inner);
    position: relative;
    /* NEW/MODIFIED: Allow item to auto-size when submenu is open */
    transition: block-size 300ms ease-out;
}
.vertical-sidebar:has(input:checked) .sidebar__item {
    block-size: auto;
}

/* NEW: Force list item height to --item when collapsed (fixes sublist gap issue) */
.vertical-sidebar:not(:has(input:checked)) .sidebar__item {
    block-size: var(--item);
}


.item--heading {
    display: flex;
    align-items: end;
    block-size: auto;
    padding: 0.5rem 0;
}

.sidebar__item--heading {
    margin-block-end: 0.4rem;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.35px;
    font-weight: 500;
    color: var(--gray--primary);
    transition: color 200ms ease-in;
}

.sidebar__list:has(.sidebar__link):hover .sidebar__item--heading {
    color: var(--gray--secondary);
}

.sidebar__link {
    display: flex;
    text-decoration: none;
    block-size: 100%;
    align-items: center;
    gap: 0.5rem;
    outline: 2px solid transparent;
    border-radius: inherit;
    /* Added padding to shift icons slightly left when collapsed */
    padding-inline: calc(var(--frame-space) / 2); 
}

.icon {
    aspect-ratio: 1;
    block-size: 100%;
    display: inline-grid;
    place-content: center;
    flex-shrink: 0;
}

.icon i {
    place-self: center;
    inline-size: var(--svg);
    block-size: var(--svg);
    color: var(--gray--primary);
}

.text {
    pointer-events: none;
    color: var(--gray--secondary);
    font-size: 0.875em;
    font-weight: 500;
    transition: color 266ms ease-out;
    white-space: nowrap;
    opacity: 0;
    transform: translateX(10px);
    transition: opacity 300ms ease-in-out, transform 300ms ease-in-out;
}

/* REVERTED: Show item text when CHECKED */
.vertical-sidebar:has(input:checked) .text {
    opacity: 1;
    transform: translateX(0);
}

/* ðŸŒ™ THEME TOGGLE SPECIFIC FIX: Ensure theme text is hidden when not checked */
.vertical-sidebar:not(:has(input:checked)) #theme-text {
    opacity: 0 !important; /* Force hide text in collapsed state */
    transform: translateX(10px) !important;
}

.sidebar__link:hover {
    background: var(--bg--hover);
}

.sidebar__link:hover .icon i {
    color: var(--accent--primary);
}

/* REVERTED: Text color change on CHECKED state hover */
.vertical-sidebar:has(input:checked) .sidebar__link:hover .text {
    color: var(--dark--primary);
}

.sidebar__link:focus {
    outline: 2px solid var(--accent--secondary);
    outline-offset: -2px;
    background: var(--bg--focus);
}

.sidebar__link:focus .icon i {
    color: var(--accent--primary);
}

.sidebar__link:active {
    background-color: var(--bg--active);
}

/* Submenu Styles (MODIFIED for smooth open/close) */
.sidebar__sublist {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex; /* Use flex to control children */
    flex-direction: column;
    max-height: 0; /* Use max-height for smooth transition */
    overflow: hidden;
    visibility: hidden;
    transition: all 300ms ease-in-out; 
    
    background: var(--bg--hover);
    border-radius: 0 0 var(--brad-inner) var(--brad-inner);
    margin-top: -0.125rem;
}

/* REVERTED: Expand submenu when CHECKED */
.vertical-sidebar:has(input:checked) .sidebar__sublist {
    max-height: 20rem; /* Sufficient height */
    visibility: visible;
}

.sidebar__subitem {
    padding: 0.25rem 1rem;
    padding-left: calc(var(--item) + 0.5rem); /* Align subitem text past the main icon space */
}

.sidebar__sublink {
    display: block;
    color: var(--gray--secondary);
    font-size: 0.8em;
    padding: 0.25rem 0;
    border-radius: var(--brad-inner);
    transition: color 200ms ease, background 200ms ease;
}

.sidebar__sublink:hover {
    color: var(--accent--primary);
    background: var(--bg--focus);
}

/* Icon visibility for collapsed/expanded */
.vertical-sidebar:not(:has(input:checked)) .toggle--open,
.vertical-sidebar:has(input:checked) .toggle--close {
    opacity: 0;
}

.vertical-sidebar:not(:has(input:checked)) :where(.item--heading) {
    opacity: 0;
}

.vertical-sidebar:has(input:checked) :where(.item--heading) {
    transition: opacity 300ms ease-in 200ms;
    opacity: 1;
}

/* Tooltips for collapsed state */
[data-tooltip]::before {
    content: attr(data-tooltip);
    position: fixed;
    translate: calc(var(--item) * 1.5) calc(var(--item) * 0.125);
    border-radius: var(--brad-inner);
    padding: 0.5rem 0.75rem;
    color: #ddd;
    background-color: hsl(198 16% 30%);
    box-shadow: 0 6px 12px -6px #0003;
    opacity: 0;
    pointer-events: none;
    scale: 0 0;
    z-index: 999;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 350ms ease-out;
    white-space: nowrap;
}

.vertical-sidebar:not(:has(input:checked))
    .sidebar__link:where(:hover, :focus-visible)[data-tooltip]::before {
    opacity: 1;
    scale: 1;
}

/* --- FOOTER & POPUPS (UNCHANGED) --- */
footer {
    background: #FFFFFF;
    padding: 1rem;
    margin-top: 0.5rem;
    border-top-left-radius: 1rem;
    border-top-right-radius: 1rem;
    box-shadow: inset 0 2px 3px var(--light_shadow);
    color: var(--text_color_dark);
}
html.dark footer { background: var(--dark_background_secondary); box-shadow: inset 0 2px 3px var(--dark_shadow); }
footer .container { max-width: 100%; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
footer .footer-left, footer .footer-right { box-sizing: border-box; }
footer .section-title { font-size: 0.85rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--primary_blue); text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 1px solid var(--primary_blue); padding-bottom: 0.15rem; }
footer summary { font-size: 0.8rem; }
footer summary a { font-size: 0.8rem; }
html.dark footer .section-title { color: var(--pop_yellow); border-bottom: 1px solid var(--pop_yellow); }
footer .dropdown-container { display: flex; flex-direction: column; gap: 0.5rem; padding-right: 0.5rem; }
footer .dropdown { position: relative; display: flex; flex-direction: column; }
footer .dropdown-label { font-size: 0.65rem; font-weight: 500; margin-bottom: 0.25rem; color: var(--pop_yellow); }
html.dark footer .dropdown-label { color: var(--pop_yellow); }
footer .dropdown-select { padding: 0.4rem 1.5em 0.4rem 0.4rem; font-size: 0.65rem; color: var(--text_color_light); background-color: var(--light_yellow_bg); border: 1px solid var(--border_light); border-radius: 0.25rem; transition: all 0.2s ease; outline: none; box-shadow: 0 1px 2px var(--light_shadow); -webkit-appearance: none; -moz-appearance: none; appearance: none; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%230C356A%22%20d%3D%22M287%2069.9a14.6%2014.6%200%200%200-20.6%200L146.2%20190.1%2026%2069.9a14.6%2014.6%200%200%200-20.6%2020.6l130.6%20130.6a14.6%2014.6%200%200%200%2020.6%200L287%2090.5a14.6%2014.6%200%200%200%200-20.6z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 0.7em top 50%; background-size: 0.65em auto; }
footer .dropdown-select:focus { border-color: var(--secondary_blue); box-shadow: 0 0 0 2px rgba(1, 116, 190, 0.3); }
html.dark footer .dropdown-select { background-color: var(--dark_input_bg); color: var(--text_color_dark); border-color: var(--dark_border); background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23FFC436%22%20d%3D%22M287%2069.9a14.6%2014.6%200%200%200-20.6%200L146.2%20190.1%2026%2069.9a14.6%2014.6%200%200%200-20.6%2020.6l130.6%20130.6a14.6%2014.6%200%200%200%2020.6%200L287%2090.5a14.6%2014.6%200%200%200%200-20.6z%22%2F%3E%3C%2Fsvg%3E'); }
footer .contact-info { display: flex; flex-direction: column; gap: 0.4rem; margin-bottom: 0.75rem; }
footer .contact-item { font-size: 0.65rem; color: var(--text_color_light); display: flex; align-items: center; gap: 0.4rem; transition: color 0.2s ease; }
footer .contact-item:hover { color: var(--primary_blue); }
html.dark footer .contact-item { color: var(--dark_gray_text); }
html.dark footer .contact-item:hover { color: var(--pop_yellow); }
footer .contact-item i { color: var(--primary_blue); width: 1rem; text-align: center; }
html.dark footer .contact-item i { color: var(--pop_yellow); }
footer .social-links { display: flex; gap: 0.75rem; margin-bottom: 0.75rem; }
footer .social-icon { color: var(--primary_blue); font-size: 1rem; transition: transform 0.2s ease, color 0.2s ease; }
footer .social-icon:hover { color: #FFD700; transform: translateY(-2px) scale(1.1); }
html.dark footer .social-icon { color: var(--pop_yellow); }
footer .disclaimer { font-size: 0.6rem; color: var(--text_color_light); line-height: 1.3; opacity: 0.9; background-color: rgba(0, 0, 0, 0.1); padding: 0.4rem; border-radius: 0.25rem; }
html.dark footer .disclaimer { color: var(--dark_gray_text); background-color: rgba(255, 255, 255, 0.05); }
.footer-bottom { padding: 0rem 0; text-align: center; color: #a3a2a2; font-size: 0.65rem; }
.footer-links { display: flex; justify-content: center; flex-wrap: wrap; gap: 0.1rem; margin-bottom: 0.3rem; }
.footer-link { color: #4b5563; text-decoration: none; transition: color 0.2s; }
.footer-link:hover { color: #3b82f6; text-decoration: underline; }
.copyright { color: #6b7280; font-size: 0.55rem; }

/* --- POPUPS --- */
.search-popup, .menu-popup { position: fixed; background: var(--card_bg_light); z-index: 1030; transition: all 0.3s ease; overflow-y: auto; }
.search-popup { top: -100%; left: 0; right: 0; max-height: 456px; border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; box-shadow: 0 5px 15px var(--light_shadow); }
.menu-popup { left: -100%; top: 0; bottom: 0; width: 75%; max-width: 300px; border-top-right-radius: 20px; border-bottom-right-radius: 20px; box-shadow: 5px 0 15px var(--light_shadow); }
.search-popup.active { top: 0; }
.menu-popup.active { left: 0; }
.search-popup-overlay, .menu-popup-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 1029; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
.search-popup-overlay.active, .menu-popup-overlay.active { opacity: 1; pointer-events: all; }
html.dark .search-popup, html.dark .menu-popup { background: var(--dark_background_secondary); }

/* Hide mobile menu popup in desktop */
@media (min-width: 1024px) {
    .menu-popup,
    .menu-popup-overlay,
    #menu-placeholder {
        display: none !important;
    }
    
    /* Ensure no accidental activation */
    .menu-popup.active {
        display: none !important;
    }
    /* .content-wrapper { padding-left: 80px; } */
    #nav-placeholder { position: fixed; top: 0; left: 0; bottom: 0; width: 80px; z-index: 100; background: var(--card_bg_light); border-right: 1px solid var(--border_light); display: flex; flex-direction: column; padding-top: 80px; align-items: center; }
    #nav-placeholder > nav, #nav-placeholder nav > div { position: static !important; flex-direction: column !important; box-shadow: none !important; border-radius: 0 !important; padding: 0 !important; width: 100%; gap: 0.5rem; }
    #nav-placeholder nav a { padding: 0.75rem 0.5rem; width: 90%; border-radius: 8px; }
    html.dark #nav-placeholder { background: var(--dark_background_secondary); border-right-color: var(--dark_border); }
    #bottom-nav-placeholder { display: none; }
}